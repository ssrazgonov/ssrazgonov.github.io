<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <link rel="stylesheet" type="text/css" href="./styles/mobile-controls.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #111;
            color: #fff;
        }
        
        .test-info {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-info h1 {
            color: #f80;
            margin-bottom: 10px;
        }
        
        .test-info p {
            color: #aaa;
            line-height: 1.6;
        }
        
        .test-controls {
            margin-top: 50px;
        }
        
        .test-button {
            background: #f80;
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        
        .test-button:hover {
            background: #ff6b35;
        }
        
        .status {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #f80;
        }
        
        .status h3 {
            color: #f80;
            margin-top: 0;
        }
        
        .log {
            background: #000;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #333;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-radius: 3px;
        }
        
        .log-entry.info { background: rgba(0, 123, 255, 0.2); }
        .log-entry.success { background: rgba(40, 167, 69, 0.2); }
        .log-entry.warning { background: rgba(255, 193, 7, 0.2); }
        .log-entry.error { background: rgba(220, 53, 69, 0.2); }
    </style>
</head>
<body>
    <div class="test-info">
        <h1>üß™ –¢–µ—Å—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
        <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è JS DOOM</p>
        <p><strong>–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ –æ–∫–Ω–æ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</strong></p>
    </div>

    <div class="test-controls">
        <button class="test-button" onclick="testMobileDetection()">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ</button>
        <button class="test-button" onclick="toggleControls()">üéÆ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
        <button class="test-button" onclick="testTouchEvents()">üëÜ –¢–µ—Å—Ç touch —Å–æ–±—ã—Ç–∏–π</button>
        <button class="test-button" onclick="clearLog()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
    </div>

    <div class="status">
        <h3>üì± –°—Ç–∞—Ç—É—Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        <div id="status-content">
            <p>–°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏...</p>
        </div>
    </div>

    <div class="status">
        <h3>üìù –õ–æ–≥ —Å–æ–±—ã—Ç–∏–π</h3>
        <div id="log-content" class="log">
            <div class="log-entry info">–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞</div>
        </div>
    </div>

    <script src="./mobile-controls.js"></script>
    <script>
        let mobileControlsInstance = null;
        let logCounter = 0;

        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(message, type = 'info') {
            const logContent = document.getElementById('log-content');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${++logCounter}] ${message}`;
            logContent.appendChild(entry);
            logContent.scrollTop = logContent.scrollHeight;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–∞
        function clearLog() {
            document.getElementById('log-content').innerHTML = '';
            logCounter = 0;
            log('–õ–æ–≥ –æ—á–∏—â–µ–Ω', 'info');
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        function testMobileDetection() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                           (window.innerWidth <= 768 && 'ontouchstart' in window);
            
            log(`–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–±–∏–ª—å–Ω–æ–≥–æ: ${isMobile ? '–î–ê' : '–ù–ï–¢'}`, isMobile ? 'success' : 'warning');
            log(`User Agent: ${navigator.userAgent}`, 'info');
            log(`–®–∏—Ä–∏–Ω–∞ —ç–∫—Ä–∞–Ω–∞: ${window.innerWidth}px`, 'info');
            log(`Touch –ø–æ–¥–¥–µ—Ä–∂–∫–∞: ${'ontouchstart' in window ? '–î–ê' : '–ù–ï–¢'}`, 'info');
            
            updateStatus();
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        function toggleControls() {
            if (mobileControlsInstance) {
                mobileControlsInstance.toggleControls();
                log('–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ', 'success');
            } else {
                log('–ú–æ–±–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ', 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è touch —Å–æ–±—ã—Ç–∏–π
        function testTouchEvents() {
            if ('ontouchstart' in window) {
                log('Touch —Å–æ–±—ã—Ç–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è', 'success');
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º touch —Å–æ–±—ã—Ç–∏—è
                const testElement = document.createElement('div');
                testElement.style.cssText = 'position: fixed; top: 50%; left: 50%; width: 100px; height: 100px; background: #f80; border-radius: 50%; transform: translate(-50%, -50%); z-index: 9999;';
                testElement.textContent = 'üëÜ';
                testElement.style.fontSize = '40px';
                testElement.style.display = 'flex';
                testElement.style.alignItems = 'center';
                testElement.style.justifyContent = 'center';
                
                document.body.appendChild(testElement);
                
                setTimeout(() => {
                    document.body.removeChild(testElement);
                    log('Touch —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω', 'success');
                }, 2000);
                
            } else {
                log('Touch —Å–æ–±—ã—Ç–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è', 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
        function updateStatus() {
            const statusContent = document.getElementById('status-content');
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                           (window.innerWidth <= 768 && 'ontouchstart' in window);
            
            statusContent.innerHTML = `
                <p><strong>–ú–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</strong> ${isMobile ? '‚úÖ –î–ê' : '‚ùå –ù–ï–¢'}</p>
                <p><strong>–®–∏—Ä–∏–Ω–∞ —ç–∫—Ä–∞–Ω–∞:</strong> ${window.innerWidth}px</p>
                <p><strong>–í—ã—Å–æ—Ç–∞ —ç–∫—Ä–∞–Ω–∞:</strong> ${window.innerHeight}px</p>
                <p><strong>Touch –ø–æ–¥–¥–µ—Ä–∂–∫–∞:</strong> ${'ontouchstart' in window ? '‚úÖ –î–ê' : '‚ùå –ù–ï–¢'}</p>
                <p><strong>User Agent:</strong> ${navigator.userAgent.substring(0, 50)}...</p>
                <p><strong>–ú–æ–±–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> ${mobileControlsInstance ? '‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ' : '‚ùå –ù–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ'}</p>
            `;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'info');
            
            // –ñ–¥–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                if (window.mobileControls) {
                    mobileControlsInstance = window.mobileControls;
                    log('–ú–æ–±–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ', 'success');
                } else {
                    log('–ú–æ–±–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ', 'warning');
                }
                
                updateStatus();
                testMobileDetection();
            }, 1000);
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
        window.addEventListener('resize', function() {
            log(`–†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω: ${window.innerWidth}x${window.innerHeight}`, 'info');
            updateStatus();
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
        window.addEventListener('orientationchange', function() {
            log('–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∞', 'info');
            setTimeout(updateStatus, 100);
        });
    </script>
</body>
</html>
